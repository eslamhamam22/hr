<div class="report-container">
  <h1>HR Reports</h1>

  <div class="report-selector">
    <label>Select Report Type:</label>
    <select [(ngModel)]="selectedReport" (change)="onReportChange()">
      <option value="">Choose a report...</option>
      <option value="attendance">Attendance Report</option>
      <option value="leave-summary">Leave Summary</option>
      <option value="overtime">Overtime Audit</option>
      <option value="time-off">Time Off Report</option>
      <option value="work-from-home">Work From Home Report</option>
      <option value="monthly-work-summary">Monthly Work Summary</option>
      <option value="monthly-work-details">Monthly Work Details</option>
    </select>
  </div>

  <app-report-filters
    *ngIf="selectedReport"
    [reportType]="selectedReport"
    (filterApplied)="onFilterApplied($event)"
  ></app-report-filters>

  <div *ngIf="isLoading()" class="loading">
    <div class="spinner"></div>
    <p>Generating report...</p>
  </div>

  <div *ngIf="!isLoading() && reportData().length > 0" class="report-data fade-in">
    <div class="export-buttons">
      <button class="btn btn-outline" (click)="exportExcel()">ğŸ“Š Export Excel</button>
      <button class="btn btn-outline" (click)="exportCsv()">ğŸ“ Export CSV</button>
      <button class="btn btn-outline" (click)="exportPdf()">ğŸ“„ Export PDF</button>
    </div>

    <div class="table-responsive">
        <table class="report-table">
          <thead>
            <tr>
              <th *ngFor="let header of reportHeaders()">{{ formatHeader(header) }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of reportData()">
              <td *ngFor="let header of reportHeaders()">
                {{ formatValue(header, row[header]) }}
              </td>
            </tr>
          </tbody>
        </table>
    </div>
  </div>

  <div *ngIf="!isLoading() && reportData().length === 0 && selectedReport && !errorMessage()" class="no-data">
    <p>No data available for the selected filters</p>
  </div>

  <div *ngIf="errorMessage()" class="alert alert-error">
    {{ errorMessage() }}
  </div>
</div>