<div class="user-list-container">
  <div class="page-header">
    <div class="header-content">
      <h1>User Management</h1>
      <p class="subtitle">Manage system users and their access</p>
    </div>
    <button class="btn btn-primary" (click)="openCreateDialog()">
      <span class="icon">â•</span>
      Add New User
    </button>
  </div>

  <app-data-table [columns]="columns" [data]="users()" [loading]="isLoading()" [pagination]="paginationConfig()"
    [searchable]="true" (searchChange)="onSearch($event)" (pageChange)="onPageChange($event)"
    (pageSizeChange)="onPageSizeChange($event)">

    <ng-template #cellTemplate let-row let-column="column">
      <ng-container [ngSwitch]="column.field">
        <span *ngSwitchCase="'role'" class="role-badge" [attr.data-role]="getRoleDisplayLabel(row.role)">
          {{ getRoleDisplayLabel(row.role) }}
        </span>

        <span *ngSwitchCase="'status'">
          <span [class.active]="row.isActive" [class.inactive]="!row.isActive" class="status-badge">
            {{ row.isActive ? 'Active' : 'Inactive' }}
          </span>
        </span>

        <div *ngSwitchCase="'actions'" class="action-buttons">
          <button class="btn-icon btn-edit" (click)="editUser(row)" title="Edit">
            âœï¸
          </button>
          <button class="btn-icon btn-delete" (click)="deleteUser(row)" title="Delete">
            ğŸ—‘ï¸
          </button>
        </div>

        <span *ngSwitchDefault>{{ row[column.field] }}</span>
      </ng-container>
    </ng-template>
  </app-data-table>
</div>

<!-- User Modal -->
<app-user-modal [isOpen]="isModalOpen" [mode]="modalMode" [user]="selectedUser" (saved)="onModalSaved()"
  (cancelled)="onModalCancelled()">
</app-user-modal>

<!-- Delete Confirmation Dialog -->
<app-confirm-dialog [isOpen]="isDeleteDialogOpen" title="Delete User"
  [message]="'Are you sure you want to delete user \'' + (userToDelete?.fullName || '') + '\'? This action cannot be undone.'"
  confirmText="Delete" (confirmed)="onDeleteConfirmed()" (cancelled)="onDeleteCancelled()">
</app-confirm-dialog>