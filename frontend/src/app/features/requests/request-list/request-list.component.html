<div class="list-container">
  <div class="page-header">
    <div class="header-content">
      <h1>My Leave Requests</h1>
      <p class="subtitle">View and manage your leave requests</p>
    </div>
    <button class="btn-primary" (click)="openCreateModal()">
      <span class="icon">âž•</span>
      New Leave Request
    </button>
  </div>

  <div class="toolbar">
    <button class="btn btn-secondary" (click)="refreshData()">
      ðŸ”„ Refresh
    </button>
  </div>

  <div *ngIf="isLoading()" class="loading">
    Loading requests...
  </div>

  <div *ngIf="!isLoading() && requests().length > 0" class="table-wrapper">
    <app-data-table [columns]="columns" [data]="requests()" [rowStyle]="getRowStyle">

      <ng-template #cellTemplate let-row let-column="column">
        <ng-container [ngSwitch]="column.field">
          <span *ngSwitchCase="'startDate'">{{ row.startDate | date: 'MMM dd, yyyy' }}</span>
          <span *ngSwitchCase="'endDate'">{{ row.endDate | date: 'MMM dd, yyyy' }}</span>
          <span *ngSwitchCase="'submittedAt'">{{ row.submittedAt | date: 'MMM dd, yyyy' }}</span>
          <span *ngSwitchCase="'status'" class="status-badge" [attr.data-status]="row.status">
            {{ row.status }}
          </span>
          <span *ngSwitchCase="'approvedByName'">{{ row.approvedByName || '-' }}</span>
          <span *ngSwitchDefault>{{ row[column.field] }}</span>
        </ng-container>
      </ng-template>

    </app-data-table>
  </div>

  <div *ngIf="!isLoading() && requests().length === 0" class="no-data">
    <div class="empty-state">
      <span class="empty-icon">ðŸ“‹</span>
      <p>No leave requests found.</p>
      <button class="btn btn-primary" (click)="openCreateModal()">Create Your First Request</button>
    </div>
  </div>

  <div *ngIf="errorMessage()" class="alert alert-error">
    {{ errorMessage() }}
  </div>
</div>

<!-- Leave Request Modal -->
<app-request-modal [isOpen]="isModalOpen" (saved)="onModalSaved()" (cancelled)="onModalCancelled()">
</app-request-modal>